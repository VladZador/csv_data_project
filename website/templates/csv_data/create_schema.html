{% extends 'base.html' %}
{% load static %}

{% block title %}Create data schema{% endblock %}

{% block external %}
<style>
    input.invalid {
        background-color: #ffdddd;
    }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
<script>
$(function() {
    $("#sortableList").sortable()
});
</script>
{% endblock %}

{% block content %}

<div id="chooseColumns" class="tab">
<h2>Choose columns for your data schema:</h2>

<p>Choose which columns to include in the schema. You can change the order of the columns later.</p>

<ul class="dataTypesList">
<li>
    <span id="fullNameLabel" style="opacity:0.25">Full name: </span>
    <input type="checkbox" id="fullNameCheck" onclick="fullNameClick()"></li>

<li>
    <span id="jobLabel" style="opacity:0.25">Job: </span>
    <input type="checkbox" id="jobCheck" onclick="jobClick()"></li>

<li>
    <span id="emailLabel" style="opacity:0.25">Email: </span>
    <input type="checkbox" id="emailCheck" onclick="emailClick()"></li>

<li>
    <span id="domainLabel" style="opacity:0.25">Domain name: </span>
    <input type="checkbox" id="domainCheck" onclick="domainClick()"></li>

<li>
    <span id="phoneLabel" style="opacity:0.25">Phone number: </span>
    <input type="checkbox" id="phoneCheck" onclick="phoneClick()"></li>

<li>
    <span id="companyLabel" style="opacity:0.25">Company name: </span>
    <input type="checkbox" id="companyCheck" onclick="companyClick()"></li>

<li>
    <span id="textLabel" style="opacity:0.25">Text: </span>
    <input type="checkbox" id="textCheck" onclick="textClick()">
    <div id="textRangeForm" class="input-group" style="display:none">
        <p>Enter a range for a number of sentences in the text.</p>
        <p>Enter one or both range limits in the fields. If you leave any field blank, a random number will be used for it.</p>
        <p>
            <input type="text" id="textMin" name="range"
            placeholder="Minimum number of sentences in a text"
            onclick="this.className = ''">
            <input type="text" id="textMax" name="range"
            placeholder="Maximum number of sentences in a text"
            onclick="this.className = ''">
            <button onclick="validateTextOrIntForm('text')">Select this range</button>
        </p>
    </div></li>

<li>
    <span id="integerLabel" style="opacity:0.25">Integer: </span>
    <input type="checkbox" id="integerCheck" onclick="integerClick()">
    <div id="integerRangeForm" class="input-group" style="display:none">
        <p>Enter a range for the number to be generated.</p>
        <p>Enter one or both range limits in the fields. If you leave any field blank, a random number will be used for it.</p>
        <p>
            <input type="text" id="integerMin" name="range"
            placeholder="Minimum range limit"
            onclick="this.className = ''">
            <input type="text" id="integerMax" name="range"
            placeholder="Maximum range limit"
            onclick="this.className = ''">
            <button onclick="validateTextOrIntForm('integer')">Select this range</button>
        </p>
    </div></li>

<li>
    <span id="addressLabel" style="opacity:0.25">Address: </span>
    <input type="checkbox" id="addressCheck" onclick="addressClick()"></li>

<li>
    <span id="dateLabel" style="opacity:0.25">Date: </span>
    <input type="checkbox" id="dateCheck" onclick="dateClick()"></li>

</ul>
</div>


<div id="orderColumns" class="tab" style="display: none">
<h2>Order columns by dragging them:</h2>
<ul id="sortableList" class="sortable">
    <!-- Columns chosen by a user will appear here -->
</ul>
<p>And choose the name for your data schema:</p>
<input type="text" id="schemaName" name="schemaName"
oninput="this.className = ''">
</div>


<div class="buttons">
    <button type="button" id="prevBtn" onclick="goBack()" style="display: none">Back</button>
    <button type="button" id="nextBtn" onclick="goNext()">Next</button>
    <button type="button" id="confrmBtn" 
    data-url="{% url 'confirm_schema_creation' %}"
    onclick="sendRequest()" style="display: none">Create</button>
</div>

<script src="{% static 'scripts/create_schema.js' %}"></script>

{% endblock %}
